<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc-markdown-css-theme" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>pok</title>
  <style type="text/css">

:root {

--background-color: #fff;
--color-text: #1b2733;
--color-text-secondary: #637282;
--color-link: #0070e0;
--color-sidenote: #616970;
--highlight-red: #ea9999;
--highlight-yellow: #ffe599;
--highlight-green: #b6d7a8;
--highlight-blue: #a4c2f4;
--highlight-purple: #b4a7d6;
--color-inline-code: #1b2733;
--color-inline-code-bg: #f3f3f8;
--color-border: #dfdfd0;
--color-border-heavy: #ccccd4;
--color-table-heading: #f3f3fb;

--font-family-prose: system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;
--font-family-heading: system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;
--font-family-code: Menlo, monospace;
--side-note-number-font-family: var(--font-family-prose);
--line-height: 26px;
--font-size: 17px;
--inline-code-font-size: 15px;
--code-block-font-size: 14px;
--code-block-side-padding: 8px;
--line-numbers-font-size: 12px;
--tight-code-line-height: 18px;
--tight-code-padding-top: 5px;
--side-note-line-height: 20px;
--side-note-font-size: 13px;
--side-note-code-font-size: 13px;
--side-note-baseline-offset: 4px;
--side-note-sup-offset: -6px;
--side-note-number-hang-left: -6px;
--side-note-text-indent: -9px;
--heading-font-weight: 500;
--title-font-size: 42px;
--title-code-font-size: 40px;
--title-line-height: 48px;
--title-margin-top: 92px;
--h1-font-size: 32px;
--h1-code-font-size: 29px;
--h1-line-height: 36px;
--h1-word-spacing: 1px;
--h1-margin-top: 30px;
--h1-margin-bottom: 12px;
--h2-font-size: 22px;
--h2-code-font-size: 20px;
--h2-line-height: 28px;
--h2-word-spacing: 0.5px;
--h2-margin-top: 18px;
--h2-margin-bottom: 6px;
--ul-indent-size: 23px;
--ol-indent-size: 19px;
--ol-li-padding-left: 4px;
--hr-margin-top: 18px;
--hr-margin-bottom: calc(var(--line-height) - var(--hr-margin-top) - 1px);
--extra-wide-scale-factor: 1.5;
--figcaption-line-height: 21px;
--figcaption-font-size: 14px;
--figcaption-code-font-size: 13px;
--figcaption-gap: 6px;
--captioned-figure-gap: 10px;
--table-line-height: 21px;
--table-font-size: 14px;
--table-code-font-size: 13px;
--nav-toc-font-size: 12px;
--nav-toc-code-font-size: 12px;
--nav-toc-indent: 15px;
--nav-toc-baseline-offset: 2px;

--main-width: 745px;

--main-width-narrow: 550px;
--side-note-max-width: 300px;
}
@media (prefers-color-scheme: dark) {
:root {
--background-color: #161313;
--color-text: #f7f5f2;
--color-text-secondary: #9d9b99;
--color-link: #2994ff;
--color-sidenote: #b4b2af;
--highlight-red: #660000;
--highlight-yellow: #7f6000;
--highlight-green: #274e13;
--highlight-blue: #1c4587;
--highlight-purple: #351c75;
--color-inline-code: #f7f5f2;
--color-inline-code-bg: #242121;
--color-border: #393635;
--color-border-heavy: #524f4d;
--color-table-heading: #242121;
}
}
*, *:after, *:before {
box-sizing: border-box;
margin: 0;
padding: 0;
-webkit-tap-highlight-color: rgba(0,0,0,0);
-webkit-font-smoothing: antialiased;
-moz-osx-font-smoothing: grayscale;
}
html {

-webkit-text-size-adjust: 100%;
}
body {
font-family: var(--font-family-prose);
color: var(--color-text);
font-size: var(--font-size);
line-height: var(--line-height);
-webkit-font-variant-ligatures: no-common-ligatures;
font-variant-ligatures: no-common-ligatures;

hanging-punctuation: first;
margin: 0;
padding: 0;
padding-top: var(--title-margin-top);
width: 100%;
background-color: var(--background-color);
}
@media print {
body {
background-color: initial;
}
}


.only-light-mode {
display: inherit;
}
.only-dark-mode {
display: none;
}
@media (prefers-color-scheme: dark) {
.only-light-mode {
display: none;
}
.only-dark-mode {
display: inherit;
}
}



.sidenote,
.marginnote {
color: var(--color-sidenote);
font-size: var(--side-note-font-size);
line-height: var(--side-note-line-height);
vertical-align: baseline;

margin-top: var(--side-note-baseline-offset);
}
.sidenote code,
.marginnote code {
color: var(--color-sidenote);
}
main {
counter-reset: sidenote-counter;
}
.sidenote-number {
counter-increment: sidenote-counter;
}
.sidenote-number:after,
.sidenote:before {
content: counter(sidenote-counter);
position: relative;
}
nav#TOC label,
label.margin-toggle:not(.sidenote-number),
.sidenote-number:after,
.sidenote:before,
.footnote-ref sup,
sup {
font-size: var(--side-note-font-size);
font-weight: 700;
font-family: var(--side-note-number-font-family);
-webkit-font-feature-settings: "tnum" 1;
font-feature-settings: "tnum" 1;

vertical-align: baseline;
position: relative;
top: var(--side-note-sup-offset);
}
sup {
font-weight: inherit;
}

.sidenote:before { left: var(--side-note-number-hang-left); }

.sidenote { text-indent: var(--side-note-text-indent); }


input.margin-toggle {
display: none;
}
label.margin-toggle:not(.sidenote-number) {
display: none;
}
label.sidenote-number {
display: inline;
}

@media screen and (max-width: calc(26px + 550px + 26px + 169px + 26px - 1px)) {
.margin-toggle:checked + .sidenote,
.margin-toggle:checked + .marginnote {
margin-top: var(--side-note-line-height);
vertical-align: baseline;
}
label.margin-toggle {
color: var(--color-link);
}
label.margin-toggle:not(.sidenote-number) {
display: inline;
}
label {
cursor: pointer;
}
}



h1, h2 {
font-family: var(--font-family-heading);
font-weight: var(--heading-font-weight);
}
h4, h5, h6 {
font-weight: normal;
}
h1.title {
margin-top: var(--line-height);
margin-bottom: var(--line-height);
font-size: var(--title-font-size);
line-height: var(--title-line-height);
}
h1.title code {
font-size: var(--title-code-font-size);
}
h1:not(.title) {
font-size: var(--h1-font-size);
line-height: var(--h1-line-height);
word-spacing: var(--h1-word-spacing);
margin-top: var(--h1-margin-top);
margin-bottom: var(--h1-margin-bottom);
}
h1:not(.title) code {
font-size: var(--h1-code-font-size);
}
h2 {
font-size: var(--h2-font-size);
line-height: var(--h2-line-height);
word-spacing: var(--h2-word-spacing);
margin-top: var(--h2-margin-top);
margin-bottom: var(--h2-margin-bottom);
}
h2 code {
font-size: var(--h2-code-font-size);
}
h3 {
font-size: var(--font-size);
line-height: var(--line-height);
font-weight: bold;
}
h1:not(.title) + *, h1:not(.title) + p { margin-top: var(--h1-margin-bottom); }
h2 + *, h2 + p { margin-top: var(--h2-margin-bottom); }
h3 + *, h3 + p { margin-top: 0; }


p, main > ul, main > ol, div.sourceCode, main > pre, img, table {
margin-top: var(--line-height);
margin-bottom: var(--line-height)
}
ul:not(.task-list) {
margin-left: var(--ul-indent-size);
}
ol {
margin-left: var(--ol-indent-size);
}
ul.task-list {
list-style: none;
margin-left: var(--ul-indent-size);
}
ul.task-list > li {
position: relative;
}
ul.task-list > li > input[type="checkbox"] {
position: absolute;
left: calc(-1 * var(--ul-indent-size));
height: var(--line-height);
}
ol > li {
padding-left: var(--ol-li-padding-left);
}
ol { list-style-type: decimal; }
ol ol { list-style-type: lower-alpha; }
ol ol ol { list-style-type: lower-roman; }
ol ol ol ol { list-style-type: decimal; }
ol ol ol ol ol { list-style-type: lower-alpha; }
ol ol ol ol ol ol { list-style-type: lower-roman; }
ol ol ol ol ol ol ol { list-style-type: decimal; }
ol ol ol ol ol ol ol ol { list-style-type: lower-alpha; }
ol ol ol ol ol ol ol ol ol { list-style-type: lower-roman; }
ul { list-style-type: disc; }
ul ul { list-style-type: circle; }
ul ul ul { list-style-type: square; }
ul ul ul ul { list-style-type: disc; }
ul ul ul ul ul { list-style-type: circle; }
ul ul ul ul ul ul { list-style-type: square; }
ul ul ul ul ul ul ul { list-style-type: disc; }
ul ul ul ul ul ul ul ul { list-style-type: circle; }
ul ul ul ul ul ul ul ul ul { list-style-type: square; }
blockquote {
border-left: 1px solid var(--color-text-secondary);
padding-left: 1.5rem;
font-style: italic;
}
blockquote > p {
margin-top: 0;
}
blockquote em, blockquote i, blockquote .sidenote-wrapper {
font-style: normal;
}
hr {
margin-top: var(--hr-margin-top);
margin-bottom: var(--hr-margin-bottom);
border-style: solid;
color: var(--color-border-heavy);
border-width: 1px 0 0;
}
a code, a:link code, a:visited code,
a, a:link, a:visited {
color: var(--color-link);
text-decoration: none;
}
a:hover {
text-decoration: underline;
}
span.mark, mark {

color: inherit;
padding: 2px 0 1px;
}
span.mark.red, mark.red { background-color: var(--highlight-red); }
span.mark.yellow, mark.yellow { background-color: var(--highlight-yellow); }
span.mark.green, mark.green { background-color: var(--highlight-green); }
span.mark.blue, mark.blue { background-color: var(--highlight-blue); }
span.mark.purple, mark.purple { background-color: var(--highlight-purple); }
.subtitle {
margin-top: 0;
}
.author, .date {
margin-top: 0;
margin-bottom: 0;
}
.signoff {
margin-top: calc(4 * var(--line-height));
margin-bottom: calc(4 * var(--line-height));
}

span.smallcaps{ font-variant: small-caps; }
span.underline{ text-decoration: underline; }
.katex-display {
background: var(--background-color);
transform: translateZ(0px);
}
@media print {
.katex-display {
background-color: initial;
}
}



code {
font-family: var(--font-family-code);
word-spacing: normal;

color: var(--color-inline-code);
background-color: var(--color-inline-code-bg);
font-size: var(--inline-code-font-size);
margin: 0;
padding: 2px 0 1px;
border: 1px solid var(--color-border);
border-radius: 1px;
}
.sidenote code,
.marginnote code {
font-size: var(--side-note-code-font-size);
}
pre code {

color: inherit;
background-color: inherit;
font-size: var(--code-block-font-size);
line-height: var(--line-height);
margin: initial;
padding: initial;
border: initial;
border-radius: initial;
}
pre > code {
position: relative; 
display: inline-block;
min-width: 100%;
z-index: 1;
white-space: pre-wrap;
padding: 0 var(--code-block-side-padding);
}
code.sourceCode::selection {

background: transparent;
}
.wide > pre, .wide > div.sourceCode {

transform: translateZ(0px);
}
.wide pre > code {
white-space: pre;
}
pre.numberSource code {
counter-reset: source-line 0;
}
pre > code.sourceCode > span {
line-height: var(--line-height);
display: inline-block;
min-width: 100%;
}
div.sourceCode {

--line-numbers-width: calc(4 * var(--line-numbers-font-size));
--line-numbers-negative-width: calc(-1 * var(--line-numbers-width));
margin-left: var(--line-numbers-negative-width);
}
div.sourceCode > pre {
margin-left: var(--line-numbers-width);
}
pre.numberSource > code.sourceCode > span {
counter-increment: source-line;
padding-left: var(--line-numbers-width);
text-indent: var(--line-numbers-negative-width);
position: relative;
left: var(--line-numbers-negative-width);
}
pre.numberSource > code.sourceCode > span > a:first-child::before {
-webkit-touch-callout: none;
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;
content: counter(source-line);
font-size: var(--line-numbers-font-size);
text-decoration: none;
position: relative;
text-align: right;
display: inline-block;
padding: 0 calc(2 * var(--code-block-side-padding));
width: var(--line-numbers-width);
}
pre > code.sourceCode > span > a:first-child::before:hover {
text-decoration: underline;
}

.tight-code pre,
pre.tight-code {
padding-top: var(--tight-code-padding-top);
}
pre.tight-code code,
.tight-code pre code,
.tight-code pre > code.sourceCode > span,
pre.tight-code > code.sourceCode > span {
line-height: var(--tight-code-line-height);
}


pre > code.sourceCode > span::after {
position: absolute;
background-color: var(--color-code-highlight-bg);
z-index: -1;
left: calc(var(--line-numbers-width) - var(--code-block-side-padding));
right: calc(var(--line-numbers-negative-width) - var(--code-block-side-padding));
top: 0;
height: 100%;
}
pre.hl-1 > code.sourceCode > span:nth-of-type(1)::after { content: ""; }
pre.hl-2 > code.sourceCode > span:nth-of-type(2)::after { content: ""; }
pre.hl-3 > code.sourceCode > span:nth-of-type(3)::after { content: ""; }
pre.hl-4 > code.sourceCode > span:nth-of-type(4)::after { content: ""; }
pre.hl-5 > code.sourceCode > span:nth-of-type(5)::after { content: ""; }
pre.hl-6 > code.sourceCode > span:nth-of-type(6)::after { content: ""; }
pre.hl-7 > code.sourceCode > span:nth-of-type(7)::after { content: ""; }
pre.hl-8 > code.sourceCode > span:nth-of-type(8)::after { content: ""; }
pre.hl-9 > code.sourceCode > span:nth-of-type(9)::after { content: ""; }
pre.hl-10 > code.sourceCode > span:nth-of-type(10)::after { content: ""; }
pre.hl-11 > code.sourceCode > span:nth-of-type(11)::after { content: ""; }
pre.hl-12 > code.sourceCode > span:nth-of-type(12)::after { content: ""; }
pre.hl-13 > code.sourceCode > span:nth-of-type(13)::after { content: ""; }
pre.hl-14 > code.sourceCode > span:nth-of-type(14)::after { content: ""; }
pre.hl-15 > code.sourceCode > span:nth-of-type(15)::after { content: ""; }
pre.hl-16 > code.sourceCode > span:nth-of-type(16)::after { content: ""; }
pre.hl-17 > code.sourceCode > span:nth-of-type(17)::after { content: ""; }
pre.hl-18 > code.sourceCode > span:nth-of-type(18)::after { content: ""; }
pre.hl-19 > code.sourceCode > span:nth-of-type(19)::after { content: ""; }
pre.hl-20 > code.sourceCode > span:nth-of-type(20)::after { content: ""; }
pre.hl-21 > code.sourceCode > span:nth-of-type(21)::after { content: ""; }
pre.hl-22 > code.sourceCode > span:nth-of-type(22)::after { content: ""; }
pre.hl-23 > code.sourceCode > span:nth-of-type(23)::after { content: ""; }
pre.hl-24 > code.sourceCode > span:nth-of-type(24)::after { content: ""; }
pre.hl-25 > code.sourceCode > span:nth-of-type(25)::after { content: ""; }
pre.hl-26 > code.sourceCode > span:nth-of-type(26)::after { content: ""; }
pre.hl-27 > code.sourceCode > span:nth-of-type(27)::after { content: ""; }
pre.hl-28 > code.sourceCode > span:nth-of-type(28)::after { content: ""; }
pre.hl-29 > code.sourceCode > span:nth-of-type(29)::after { content: ""; }
pre.hl-30 > code.sourceCode > span:nth-of-type(30)::after { content: ""; }
pre.hl-31 > code.sourceCode > span:nth-of-type(31)::after { content: ""; }
pre.hl-32 > code.sourceCode > span:nth-of-type(32)::after { content: ""; }
pre.hl-33 > code.sourceCode > span:nth-of-type(33)::after { content: ""; }
pre.hl-34 > code.sourceCode > span:nth-of-type(34)::after { content: ""; }
pre.hl-35 > code.sourceCode > span:nth-of-type(35)::after { content: ""; }
pre.hl-36 > code.sourceCode > span:nth-of-type(36)::after { content: ""; }
pre.hl-37 > code.sourceCode > span:nth-of-type(37)::after { content: ""; }
pre.hl-38 > code.sourceCode > span:nth-of-type(38)::after { content: ""; }
pre.hl-39 > code.sourceCode > span:nth-of-type(39)::after { content: ""; }
pre.hl-40 > code.sourceCode > span:nth-of-type(40)::after { content: ""; }




figure {
margin-bottom: var(--captioned-figure-gap);
}
figure + p {
margin-top: var(--captioned-figure-gap);
}
figure > img, figure > pre, figure > div.sourceCode {
margin-bottom: var(--figcaption-gap);
}
img {
width: 100%;
display: block;
}
.wide img {

transform: translateZ(0px);
}
figcaption {
font-size: var(--figcaption-font-size);
line-height: var(--figcaption-line-height);
font-style: italic;
text-align: center;
color: var(--color-text-secondary);
}
.left-align-caption figcaption {
text-align: left;
}
figcaption code {
font-size: var(--figcaption-code-font-size);
}


table {
-webkit-font-feature-settings: "tnum" 1;
font-feature-settings: "tnum" 1;
font-size: var(--table-font-size);
line-height: var(--table-line-height);
border-spacing: 0;
border-collapse: collapse;
border: 1px solid var(--color-border-heavy);
width: 100%;

background-color: var(--background-color);
}
@media print {
table {
background-color: initial;
}
}
table code {
font-size: var(--table-code-font-size);
}
table pre code {
font-size: inherit;
}
.wide table {

transform: translateZ(0px);
}
table td, table th {
border: 1px solid var(--color-border-heavy);
padding: 5px 8px;
min-width: 100px;
}
table th {
background-color: var(--color-table-heading);
}
table > caption {
caption-side: bottom;
margin-top: var(--figcaption-gap);
margin-bottom: calc(var(--captioned-figure-gap) - var(--line-height));
font-size: var(--figcaption-font-size);
line-height: var(--figcaption-line-height);
font-style: italic;
text-align: center;
color: var(--color-text-secondary);
}
.left-align-caption table > caption {
text-align: left;
}
table > caption code {
font-size: var(--figcaption-code-font-size);
}

.note table {
font-size: inherit;
line-height: inherit;
}
.note table, .note td {
border: none;
}
.note.red td { background: var(--highlight-red); }
.note.yellow td { background: var(--highlight-yellow); }
.note.green td { background: var(--highlight-green); }
.note.blue td { background: var(--highlight-blue); }
.note.purple td { background: var(--highlight-purple); }


.date.before-toc {
padding-bottom: var(--line-height);
}
nav#TOC {
margin-bottom: var(--line-height);
border-left: 1px solid var(--color-text-secondary);
padding-left: 1.5rem;
}
nav#TOC input {
display: none;
}
nav#TOC label {
color: var(--color-link);
cursor: pointer;
}
nav#TOC > ul {
display: none;
}
nav#TOC > input:checked + ul {
display: block;
}
@media print {
nav#TOC > input + ul {
display: block;
}
}

@media screen and (min-width: calc(745px + 2 * (52px + 206px + 52px) - 1px)) {
header {
margin-bottom: var(--line-height);
}
.date.before-toc {
padding-bottom: initial;
}
nav#TOC {

margin-bottom: initial;
border-left: initial;
padding-left: initial;
position: sticky;
margin-top: calc(var(--nav-toc-baseline-offset));
float: left;
top: var(--line-height);
font-size: var(--nav-toc-font-size);
color: var(--color-text-secondary);
margin-left: var(--line-height);
max-width: calc((100vw - var(--main-width)) / 2 - 2 * var(--line-height));
max-height: calc(100vh - 2 * var(--line-height));
overflow-y: scroll;
}
nav#TOC label {
display: none;
}
nav#TOC ul {
display: block;
list-style: none;
margin-left: var(--nav-toc-indent);
}
nav#TOC > ul {
margin-left: 0;
}
nav#TOC li {
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis;
}
nav#TOC code {
font-size: var(--nav-toc-code-font-size);
}
nav#TOC code,
nav#TOC a,
nav#TOD a:link,
nav#TOD a:visited {
color: var(--color-text-secondary);
}
nav#TOC a:hover,
nav#TOC a:hover code {
text-decoration: none;
color: var(--color-link);
}
}


.sidenote,
.marginnote {
float: right;
clear: right;
position: relative;
width: var(--computed-width);
max-width: var(--side-note-max-width);
margin-right: calc(-1 * min(var(--computed-width), var(--side-note-max-width)) - var(--margin-left));
}


@media screen and (min-width: calc(745px + 2 * (52px + 206px + 52px))) {
header,
main,
footer {
max-width: var(--main-width);
}
header,
main,
footer {
margin-left: auto;
margin-right: auto;
}
.sidenote,
.marginnote {
--margin-left: calc(2 * var(--line-height));
--margin-right: var(--margin-left);
--computed-width: calc((100vw - 100%) / 2 - var(--margin-right) - var(--margin-left));
}
.wide {
width: 100%;
overflow-x: scroll;
}
.wide.extra-wide {
margin-left: calc((1 - var(--extra-wide-scale-factor)) / 2 * 100%);
width: calc(var(--extra-wide-scale-factor) * 100%);
}
.wide.full-width {
margin-left: calc(var(--line-height) - ((100vw - var(--main-width)) / 2));
width: calc(100vw - 2 * var(--line-height));
}
.wide.extra-wide figcaption,
.wide.extra-wide table > caption {
margin-left: calc(((var(--extra-wide-scale-factor) - 1) / 2) * var(--main-width));
max-width: var(--main-width);
margin-right: calc(100% - var(--main-width) - (((var(--extra-wide-scale-factor) - 1) / 2) * var(--main-width)));
}
.wide.full-width figcaption,
.wide.full-width table > caption {
margin-left: calc((100vw - var(--main-width)) / 2 - var(--line-height));
max-width: var(--main-width);
margin-right: calc(100% - var(--main-width) - ((100vw - var(--main-width)) / 2 - var(--line-height)));
}
}



@media screen and (min-width: calc(52px + 745px + 52px + 206px + 52px)) and (max-width: calc(745px + 2 * (52px + 206px + 52px) - 1px)) {
header,
nav#TOC,
main,
footer {
margin-left: calc(2 * var(--line-height));
max-width: var(--main-width);
margin-right: auto;
}
.sidenote,
.marginnote {
--margin-left: calc(2 * var(--line-height));
--margin-right: var(--margin-left);
--computed-width: calc(100vw - var(--main-width) - calc(2 * var(--line-height)) - var(--margin-right) - var(--margin-left));
}
.wide {
width: 100%;
overflow-x: scroll;
overflow-y: hidden;
}
.wide.extra-wide {
margin-left: calc(-1 * var(--line-height));
width: calc(100vw - 2 * var(--line-height));
max-width: calc(var(--extra-wide-scale-factor) * var(--main-width));
}
.wide.full-width {
margin-left: calc(-1 * var(--line-height));
width: calc(100vw - 2 * var(--line-height));
max-width: calc(100vw - 2 * var(--line-height));
}
.wide.extra-wide .katex-display,
.wide.full-width .katex-display {
padding-left: var(--line-height);
padding-right: var(--line-height);
}
.wide.extra-wide .katex-display,
.wide.extra-wide .katex-display > .katex,
.wide.full-width .katex-display,
.wide.full-width .katex-display > .katex {
text-align: left;
}
.wide.extra-wide figcaption,
.wide.extra-wide table > caption,
.wide.full-width figcaption,
.wide.full-width table > caption {
text-align: left;
margin-left: var(--line-height);
max-width: var(--main-width);
}
}



@media screen and (min-width: calc(26px + 550px + 26px + 169px + 26px)) and (max-width: calc(52px + 745px + 52px + 206px + 52px - 1px)) {
header,
nav#TOC,
main,
footer {
margin-left: var(--line-height);
max-width: calc(max(var(--main-width-narrow), 100vw - (3 * var(--line-height)) - var(--side-note-max-width)));
margin-right: auto;
}
.sidenote,
.marginnote {
--margin-left: var(--line-height);
--margin-right: var(--line-height);
--computed-width: calc(100vw - var(--main-width-narrow) - var(--line-height) - var(--margin-right) - var(--margin-left));
}
.wide {
width: var(--main-width);
overflow-x: scroll;
overflow-y: hidden;
}
.wide .katex-display,
.wide .katex-display > .katex {
text-align: left;
}
.wide figcaption,
.wide table > caption {
text-align: left;
max-width: var(--main-width-narrow);
}
.wide.extra-wide,
.wide.full-width {
width: calc(100vw - 2 * var(--line-height));
}
}



@media screen and (max-width: calc(26px + 550px + 26px + 169px + 26px - 1px)) {
header,
nav#TOC,
main,
footer {
margin-left: var(--line-height);
margin-right: var(--line-height);
}
.sidenote,
.marginnote {
display: none;
}
.margin-toggle:checked + .sidenote,
.margin-toggle:checked + .marginnote {
display: block;
float: left;
clear: both;
width: 100%;
max-width: 100%;
}
.wide {
width: 100%;
overflow-x: scroll;
overflow-y: hidden;
}
.wide .katex-display,
.wide .katex-display > .katex {
text-align: left;
}
.wide figcaption,
.wide table > caption {
text-align: left;
max-width: calc(100vw - 2 * var(--line-height));
}
}


@page {
size: letter;
margin: 0.5in;

margin-left: 0.25in;
}
@media print {
:root {
--line-height: 18px;
--font-size: 12px;
--inline-code-font-size: 11px;
--code-block-font-size: 10px;
--code-block-side-padding: 6px;
--line-numbers-font-size: 8.5px;
--tight-code-line-height: 12.5px;
--tight-code-padding-top: 2px;
--side-note-line-height: 14px;
--side-note-font-size: 9px;
--side-note-code-font-size: 9px;
--side-note-baseline-offset: 3px;
--side-note-sup-offset: -4px;
--side-note-number-hang-left: -4px;
--side-note-text-indent: -6.5px;
--title-font-size: 30px;
--title-code-font-size: 29px;
--title-line-height: 37px;
--title-margin-top: 71px;
--h1-font-size: 22px;
--h1-code-font-size: 20px;
--h1-line-height: 28px;
--h1-word-spacing: 0.5px;
--h1-margin-top: 18px;
--h1-margin-bottom: 6px;
--h2-font-size: 16.5px;
--h2-code-font-size: 15px;
--h2-line-height: 22px;
--h2-word-spacing: 0px;
--h2-margin-top: 14px;
--h2-margin-bottom: 4.5px;
--ul-indent-size: 18px;
--ol-indent-size: 14px;
--hr-margin-top: 14px;
--figcaption-line-height: 16px;
--figcaption-font-size: 10px;
--figcaption-code-font-size: 9.5px;
--figcaption-gap: 4.5px;
--captioned-figure-gap: 7.5px;
--table-line-height: 16px;
--table-font-size: 10px;
--table-code-font-size: 9.5px;
--nav-toc-font-size: 8.5px;
--nav-toc-code-font-size: 8.5px;
}
body {
padding-top: 0;

padding-left: 0.25in;
}
header,
nav#TOC,
main,
footer {
width: 5.25in;
margin-right: auto;
}
.sidenote,
.marginnote {
width: 2in;
margin-right: -2.25in;
}
.wide {
width: 7.5in;
overflow-x: hidden;
overflow-y: hidden;
}
.wide .katex-display,
.wide .katex-display > .katex {
text-align: left;
}
.wide figcaption,
.wide table > caption {
text-align: left;
width: 5.25in;
}
.wide pre > code {
white-space: pre-wrap;
}
}
h1, h2, h3 {
page-break-after: avoid;
}
table, figure, pre, img {
page-break-inside: avoid;
}



</style>
  <style type="text/css">:root {
--solarized-base03: #002b36;
--solarized-base02: #073642;
--solarized-base01: #586e75;
--solarized-base00: #657b83;
--solarized-base0: #839496;
--solarized-base1: #93a1a1;
--solarized-base2: #eee8d5;
--solarized-base3: #fdf6e3;
--solarized-yellow: #b58900;
--solarized-orange: #cb4b16;
--solarized-red: #dc322f;
--solarized-magenta: #d33682;
--solarized-violet: #6c71c4;
--solarized-blue: #268bd2;
--solarized-cyan: #2aa198;
--solarized-green: #859900;
}
@media (prefers-color-scheme: dark) {
:root {
--solarized-base03: #fdf6e3;
--solarized-base02: #eee8d5;
--solarized-base01: #93a1a1;
--solarized-base00: #839496;
--solarized-base0: #657b83;
--solarized-base1: #586e75;
--solarized-base2: #073642;
--solarized-base3: #002b36;
}
}
pre, pre.numberSource {
background: var(--solarized-base3);

--color-code-highlight-bg: var(--solarized-base2);
}
pre code { color: var(--solarized-base00); }
pre.numberSource > code.sourceCode > span > a:first-child::before {
color: var(--solarized-base1);
}
code span.kw { color: var(--solarized-green); font-weight: normal; font-style: normal; } 
code span.dt { color: var(--solarized-yellow); font-weight: normal; font-style: normal; } 
code span.dv { color: var(--solarized-cyan); font-weight: normal; font-style: normal; } 
code span.bn { color: var(--solarized-cyan); font-weight: normal; font-style: normal; } 
code span.fl { color: var(--solarized-cyan); font-weight: normal; font-style: normal; } 
code span.ch { color: var(--solarized-cyan); font-weight: normal; font-style: normal; } 
code span.st { color: var(--solarized-cyan); font-weight: normal; font-style: normal; } 
code span.co { color: var(--solarized-base1); font-weight: normal; font-style: italic; } 
code span.ot { color: var(--solarized-blue); font-weight: normal; font-style: normal; } 
code span.al { color: var(--solarized-red); font-weight: normal; font-style: normal; } 
code span.fu { color: var(--solarized-blue); font-weight: normal; font-style: normal; } 
code span.er { color: var(--solarized-red); font-weight: normal; font-style: normal; } 
code span.wa { color: var(--solarized-orange); font-weight: normal; font-style: italic; } 
code span.cn { color: var(--solarized-cyan); font-weight: normal; font-style: normal; } 
code span.sc { color: var(--solarized-red); font-weight: normal; font-style: normal; } 
code span.vs { color: var(--solarized-cyan); font-weight: normal; font-style: normal; } 
code span.ss { color: var(--solarized-red); font-weight: normal; font-style: normal; } 
code span.im { color: var(--solarized-base00); font-weight: normal; font-style: normal; } 
code span.va { color: var(--solarized-blue); font-weight: normal; font-style: normal; } 
code span.cf { color: var(--solarized-green); font-weight: normal; font-style: normal; } 
code span.op { color: var(--solarized-green); font-weight: normal; font-style: normal; } 
code span.bu { color: var(--solarized-base00); font-weight: normal; font-style: normal; } 
code span.ex { color: var(--solarized-base00); font-weight: normal; font-style: normal; } 
code span.pp { color: var(--solarized-orange); font-weight: normal; font-style: normal; } 
code span.at { color: var(--solarized-base00); font-weight: normal; font-style: normal; } 
code span.do { color: var(--solarized-base1); font-weight: normal; font-style: italic; } 
code span.an { color: var(--solarized-base1); font-weight: normal; font-style: italic; } 
code span.cv { color: var(--solarized-base1); font-weight: normal; font-style: italic; } 
code span.in { color: var(--solarized-base1); font-weight: normal; font-style: italic; } 
a.sourceLine::before { text-decoration: none; }

code.diff span.kw { color: var(--solarized-yellow); font-weight: normal; font-style: normal; } 
code.diff span.dt { color: var(--solarized-blue); font-weight: normal; font-style: normal; } 
code.diff span.st { color: var(--solarized-red); font-weight: normal; font-style: normal; } 
code.diff span.va { color: var(--solarized-green); font-weight: normal; font-style: normal; } 
</style>
</head>
<body>

<header>
<!--h1 class="title">pok</h1>
<blockquote class="metadata">
</blockquote-->
</header>

<nav id="TOC" role="doc-toc">
    <strong>Contents</strong><label for="contents">⊕</label>
  <input type="checkbox" id="contents">
  <ul>
  <li><a href="#pandas" id="toc-pandas">pandas</a>
  <ul>
  <li><a href="#data-preparation" id="toc-data-preparation">data preparation</a>
  <ul>
  <li><a href="#reading-data-from-csv-file" id="toc-reading-data-from-csv-file">reading data from csv file</a></li>
  <li><a href="#setting-data-types" id="toc-setting-data-types">setting data types</a></li>
  </ul></li>
  <li><a href="#basic-information-about-table" id="toc-basic-information-about-table">basic information about table</a>
  <ul>
  <li><a href="#general-information-about-table" id="toc-general-information-about-table">general information about table</a></li>
  <li><a href="#overview-of-values-in-column" id="toc-overview-of-values-in-column">overview of values in column</a></li>
  <li><a href="#plotting-graphs" id="toc-plotting-graphs">plotting graphs</a></li>
  <li><a href="#exporting-printing-dataframe" id="toc-exporting-printing-dataframe">exporting / printing dataframe</a></li>
  </ul></li>
  <li><a href="#working-with-data-in-table" id="toc-working-with-data-in-table">working with data in table</a>
  <ul>
  <li><a href="#accessing-value-of-cell-by-index" id="toc-accessing-value-of-cell-by-index">accessing value of cell by index</a></li>
  <li><a href="#applying-python-function-on-each-row-axis-1" id="toc-applying-python-function-on-each-row-axis-1">applying python function on each row (axis = 1)</a></li>
  <li><a href="#value-mapping" id="toc-value-mapping">value mapping</a></li>
  <li><a href="#filling-missing-values-replacing-nan" id="toc-filling-missing-values-replacing-nan">filling missing values (replacing NaN)</a></li>
  <li><a href="#filtering-rows" id="toc-filtering-rows">filtering rows</a></li>
  <li><a href="#delete-remove-rows-columns-where-value-in-missing-nan" id="toc-delete-remove-rows-columns-where-value-in-missing-nan">delete / remove rows / columns where value in missing (NaN)</a></li>
  <li><a href="#sorting" id="toc-sorting">sorting</a></li>
  </ul></li>
  <li><a href="#working-with-table-structure" id="toc-working-with-table-structure">working with table structure</a>
  <ul>
  <li><a href="#renaming-columns" id="toc-renaming-columns">renaming columns</a></li>
  <li><a href="#deleting-columns" id="toc-deleting-columns">deleting columns</a></li>
  </ul></li>
  <li><a href="#creating-new-tables" id="toc-creating-new-tables">creating new tables</a>
  <ul>
  <li><a href="#aggregation-pivot-tables" id="toc-aggregation-pivot-tables">aggregation / pivot tables</a></li>
  <li><a href="#combining-aggregation-with-original-table" id="toc-combining-aggregation-with-original-table">combining aggregation with original table</a></li>
  <li><a href="#merging-tables-by-rows-columns-are-same---merging-under" id="toc-merging-tables-by-rows-columns-are-same---merging-under">merging tables by rows (columns are same) - merging under</a></li>
  <li><a href="#merging-tables-by-columns-index-of-rows-are-same---merging-next" id="toc-merging-tables-by-columns-index-of-rows-are-same---merging-next">merging tables by columns (index of rows are same) - merging next</a></li>
  <li><a href="#reverse-pivot-table" id="toc-reverse-pivot-table">reverse pivot table</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>

<main>
            <!--
            <p><span class="sidenote-wrapper"><label for="sn-0" class="margin-toggle">⊕</label><input type="checkbox" id="sn-0" class="margin-toggle"><span class="marginnote">
                <a href="https://pandoc.org/">Pandoc</a> is a “universal document converter.” It is particularly good at generating HTML and <span class="math inline">\LaTeX</span> from Markdown. <br> <br>
            </span></span> </p>
            -->
<h1 id="pandas">pandas</h1>
<p>is <a href="python.html">python</a> module for working with tables a data processing, usually for <a href="data-analyse-python-panda.html">data-analyse-python-panda</a></p>
<h2 id="data-preparation">data preparation</h2>
<h3 id="reading-data-from-csv-file">reading data from csv file</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="ss">f&quot;</span><span class="sc">{</span>cur_dir<span class="sc">}</span><span class="ss">/cvicenie.csv&quot;</span> ,</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    sep <span class="op">=</span> <span class="st">&quot;;&quot;</span>,</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    names <span class="op">=</span> [<span class="st">&#39;datum&#39;</span>,<span class="st">&#39;od&#39;</span>,<span class="st">&#39;do&#39;</span>,<span class="st">&#39;cv&#39;</span>,<span class="st">&#39;pozn&#39;</span>],</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    parse_dates<span class="op">=</span>[<span class="st">&#39;datum&#39;</span>,<span class="st">&#39;od&#39;</span>, <span class="st">&#39;do&#39;</span>],</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    dayfirst<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    dtype <span class="op">=</span> {<span class="st">&#39;cv&#39;</span>:<span class="st">&#39;category&#39;</span>, <span class="st">&#39;pozn&#39;</span>:<span class="st">&#39;category&#39;</span>},</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    keep_default_na<span class="op">=</span><span class="va">False</span>, <span class="co"># empty string won&#39;t be NaN</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    on_bad_lines<span class="op">=</span><span class="st">&#39;error&#39;</span>, <span class="co"># or &#39;skip&#39; or &#39;warn&#39;</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    memory_map<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># usecols = [&#39;datum&#39;]</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><code>df</code> contains whole table (all rows) and is type <code>pd.DataFrame()</code></p>
<h3 id="setting-data-types">setting data types</h3>
<ul>
<li>best practice is to set correct types when reading data because of saving memory</li>
<li>when creating new columns:</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&#39;datum&#39;</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">&#39;datum&#39;</span>], dayfirst <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&#39;od&#39;</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">&#39;od&#39;</span>], <span class="bu">format</span><span class="op">=</span><span class="st">&#39;%H:%M:%S&#39;</span>) <span class="co"># time</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&#39;sekund&#39;</span>] <span class="op">=</span> pd.to_timedelta(df[<span class="st">&quot;cas&quot;</span>], unit<span class="op">=</span><span class="st">&#39;s&#39;</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&#39;pocet hodin&#39;</span>] <span class="op">=</span> df[<span class="st">&#39;od&#39;</span>].dt.total_seconds()<span class="op">//</span><span class="dv">3600</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&#39;pocet hodin&#39;</span>] <span class="op">=</span> df[<span class="st">&#39;pocet hodin&#39;</span>].astype(<span class="st">&#39;int64&#39;</span>)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&#39;rok&#39;</span>] <span class="op">=</span> df[<span class="st">&#39;datum&#39;</span>].dt.year <span class="co"># year</span></span></code></pre></div>
<ul>
<li><code>df[&#39;rok&#39;]</code> is column of table and is type <code>pd.Series</code></li>
<li>there are more attributes (not only <code>year</code>) when working with dates, e.g.:
<ul>
<li>pandas.Series.dt.isocalendar</li>
<li>pandas.Series.dt.dayofweek</li>
<li>pandas.Series.dt.dayofyear</li>
</ul></li>
</ul>
<h2 id="basic-information-about-table">basic information about table</h2>
<h3 id="general-information-about-table">general information about table</h3>
<ul>
<li><code>df.info(verbose=True, memory_usage=&quot;deep&quot;)</code> size of whole data frame in memory</li>
<li><code>df.memory_usage(deep=True)</code> size of memory by each column</li>
<li><code>df.describe(include=&#39;all&#39;)</code></li>
<li><code>df.shape</code></li>
<li><code>df.head()</code> / <code>df.tail(5)</code></li>
<li><code>df.value_counts()</code></li>
<li><code>df.isna().sum()</code> overview of how many values are missing (equals <code>NaN</code>) in each column</li>
</ul>
<h3 id="overview-of-values-in-column">overview of values in column</h3>
<ul>
<li><code>df[&#39;col&#39;].value_counts()</code> for one column</li>
<li><code>pd.crosstab(df[&#39;col1&#39;], df[&#39;col2&#39;], margins=True)</code> for two columns</li>
</ul>
<h3 id="plotting-graphs">plotting graphs</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>plt <span class="op">=</span> df.plot(y<span class="op">=</span><span class="st">&#39;perc&#39;</span>, kind<span class="op">=</span><span class="st">&#39;bar&#39;</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>plt.get_legend().remove()</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>plt.figure.savefig(<span class="st">&#39;pok.png&#39;</span>)</span></code></pre></div>
<h3 id="exporting-printing-dataframe">exporting / printing dataframe</h3>
<ul>
<li><code>df.to_markdown(tablefmt=&#39;psql&#39;))</code></li>
<li><code>df.to_string(header=False, index_names=False)</code></li>
<li><code>df.to_markdown(tablefmt=&quot;plain&quot;, headers=[])</code></li>
</ul>
<h2 id="working-with-data-in-table">working with data in table</h2>
<h3 id="accessing-value-of-cell-by-index">accessing value of cell by index</h3>
<ul>
<li>method <code>df.at(index, collumn)</code></li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&#39;num_day&#39;</span>]<span class="op">=</span> (df[<span class="st">&#39;datum&#39;</span>] <span class="op">-</span> df.at[<span class="dv">0</span>, <span class="st">&#39;datum&#39;</span>]).dt.days</span></code></pre></div>
<h3 id="applying-python-function-on-each-row-axis-1">applying python function on each row (axis = 1)</h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="bu">format</span>(cv, pozn, cas):</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    cvic <span class="op">=</span> <span class="ss">f&quot;</span><span class="sc">{</span>cv<span class="sc">}{</span><span class="st">&#39;&#39;</span> <span class="cf">if</span> pd<span class="sc">.</span>isnull(pozn) <span class="cf">else</span> <span class="st">&#39; &#39;</span><span class="op">+</span>pozn<span class="sc">}</span><span class="ss">&quot;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    time <span class="op">=</span> <span class="bu">str</span>(cas).replace(<span class="st">&quot;0 days&quot;</span>,<span class="st">&#39;&#39;</span>).strip()</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="ss">f&quot;</span><span class="sc">{</span>cvic<span class="sc">:&lt;11}</span><span class="ss"> </span><span class="sc">{</span>time<span class="sc">}</span><span class="ss">&quot;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="cf">return</span> df.<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="bu">format</span>(x.cv, x.pozn, x.cas), axis<span class="op">=</span><span class="dv">1</span>)</span></code></pre></div>
<p><code>df.apply()</code> returns new column of type <code>pd.Series</code>, that can be append to table, or use otherwise</p>
<h3 id="value-mapping">value mapping</h3>
<ul>
<li>in column <code>df[&#39;col&#39;]</code> replace values <code>hod1</code> and <code>hod2</code> by new values <code>new1</code> and <code>new2</code></li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&#39;col&#39;</span>] <span class="op">=</span> df[<span class="st">&#39;col&#39;</span>].<span class="bu">map</span>({<span class="st">&#39;hod1&#39;</span>:<span class="st">&#39;new1&#39;</span>, <span class="st">&#39;hod2&#39;</span>:<span class="st">&#39;new2&#39;</span>})</span></code></pre></div>
<ul>
<li>in column <code>df[&#39;col&#39;]</code> replace (number) values from intervals <code>bin</code> by text labels</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>pd.cut(df[<span class="st">&#39;col&#39;</span>], bins<span class="op">=</span>[<span class="dv">0</span>,<span class="dv">18</span>,<span class="dv">25</span>,<span class="dv">99</span>], labels<span class="op">=</span>[<span class="st">&#39;child&#39;</span>,<span class="st">&#39;adolescent&#39;</span>,<span class="st">&#39;adult&#39;</span>])</span></code></pre></div>
<h3 id="filling-missing-values-replacing-nan">filling missing values (replacing NaN)</h3>
<ul>
<li><code>df[&#39;col&#39;] = df[&#39;col&#39;].fillna(&#39;hodnota&#39;)</code> by constant</li>
<li><code>df.interpolate()</code> by default linear interpolation - can be changed with parameter <code>method</code></li>
</ul>
<h3 id="filtering-rows">filtering rows</h3>
<ul>
<li><code>new_df = df[df[&#39;datum&#39;] == today.strftime(&quot;%Y-%m-%d&quot;)]</code></li>
<li><code>df = df.query(&#39;cv != &quot;brucho&quot;&#39;).reset_index(drop=True)</code></li>
</ul>
<h3 id="delete-remove-rows-columns-where-value-in-missing-nan">delete / remove rows / columns where value in missing (NaN)</h3>
<ul>
<li><code>df.dropna(axis=&#39;columns&#39;)</code> delete columns</li>
<li><code>df.dropna(axis=&#39;index&#39;)</code> delete rows</li>
<li>parameter <code>subset</code> allows to specify rows / columns in which value <code>NaN</code> should be searched</li>
</ul>
<h3 id="sorting">sorting</h3>
<ul>
<li><code>df.sort_values(&#39;rok&#39;, ascending=True)</code> by one column</li>
<li><code>df.sort_values([&#39;pause&#39;, &#39;datum&#39;], ascending=[False, False])</code> by more columns</li>
</ul>
<h2 id="working-with-table-structure">working with table structure</h2>
<h3 id="renaming-columns">renaming columns</h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># setting new names for each collumns</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>df.columns <span class="op">=</span> [<span class="st">&#39;odcviceny cas&#39;</span>, <span class="st">&#39;pocet cviceni&#39;</span>]</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># setting new names only selected collumns</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>df.rename(columns<span class="op">=</span>{<span class="st">&quot;pocet dni&quot;</span>:<span class="st">&quot;days&quot;</span>, <span class="st">&quot;pocet cviceni&quot;</span>:<span class="st">&quot;trainings&quot;</span>, <span class="st">&quot;pocet hodin&quot;</span>:<span class="st">&quot;hours&quot;</span>})</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co"># mass renaming by string manipulation with collumn&#39;s names</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>df.columns <span class="op">=</span> df.columns.<span class="bu">str</span>.replace(<span class="st">&#39; &#39;</span>,<span class="st">&#39;_&#39;</span>)</span></code></pre></div>
<h3 id="deleting-columns">deleting columns</h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>df.pop(<span class="st">&#39;rok&#39;</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.drop([<span class="st">&#39;cv&#39;</span>, <span class="st">&#39;num_day&#39;</span>], axis<span class="op">=</span><span class="st">&quot;columns&quot;</span>)</span></code></pre></div>
<h2 id="creating-new-tables">creating new tables</h2>
<h3 id="aggregation-pivot-tables">aggregation / pivot tables</h3>
<div class="sourceCode" id="cb10"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>new_df <span class="op">=</span> df.groupby(<span class="st">&#39;rok&#39;</span>).agg({<span class="st">&#39;odcviceny cas&#39;</span>: [<span class="st">&#39;sum&#39;</span>, <span class="st">&#39;count&#39;</span>], <span class="st">&#39;pocet cviceni&#39;</span>:[<span class="st">&#39;sum&#39;</span>]})</span></code></pre></div>
<p>in case of group by on datetime value, we can use method <code>df.resample()</code></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>new_df <span class="op">=</span> df.resample(<span class="st">&#39;Y&#39;</span>, on<span class="op">=</span><span class="st">&#39;datum&#39;</span>).agg()</span></code></pre></div>
<p>if we are groupping by index, parameter <code>on</code> can be omitted</p>
<h3 id="combining-aggregation-with-original-table">combining aggregation with original table</h3>
<ul>
<li>point 19 in <a href="https://youtu.be/RlIiVeig3hc?t=1121">“My top 25 pandas tricks” by “Data School”</a></li>
<li>method <code>pandas.DataFrame.transform()</code></li>
<li><code>df[&#39;new&#39;] = df.groupby(&#39;group_column&#39;)[&#39;input_col&#39;].transform(fn)</code></li>
<li><code>df[&#39;total price&#39;] = df.groupby(&#39;id&#39;)[&#39;price&#39;].transform(sum)</code></li>
</ul>
<h3 id="merging-tables-by-rows-columns-are-same---merging-under">merging tables by rows (columns are same) - merging under</h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>new_df <span class="op">=</span> pd.concat([df1, df2], axis <span class="op">=</span> <span class="dv">0</span>)</span></code></pre></div>
<h3 id="merging-tables-by-columns-index-of-rows-are-same---merging-next">merging tables by columns (index of rows are same) - merging next</h3>
<div class="sourceCode" id="cb13"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="bu">all</span> <span class="op">=</span> [df1.reset_index(drop<span class="op">=</span><span class="va">True</span>), df2.reset_index(drop<span class="op">=</span><span class="va">True</span>)]</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>res <span class="op">=</span> pd.concat(<span class="bu">all</span>, axis<span class="op">=</span><span class="dv">1</span>, ignore_index<span class="op">=</span><span class="va">True</span>)</span></code></pre></div>
<h3 id="reverse-pivot-table">reverse pivot table</h3>
<ul>
<li><code>df.melt()</code> conversion from wide format (pivot table) to long format</li>
</ul>
</main>

<script>
;(function() {
  // Non-essential if user has JavaScript off. Just makes checkboxes look nicer.
  var selector = '.task-list > li > input[type="checkbox"]';
  var checkboxes = document.querySelectorAll(selector);
  Array.from(checkboxes).forEach((checkbox) => {
    var wasChecked = checkbox.checked;
    checkbox.disabled = false;
    checkbox.addEventListener('click', (ev) => {ev.target.checked = wasChecked});
  });
})();
</script>
</body>
</html>
